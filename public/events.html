<!DOCTYPE html>
    <html lang="en" data-theme="dark">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Experiences - Innovate</title>
      <link rel="stylesheet" href="/css/instagram.css" />
      <link rel="stylesheet" href="/css/experiences.css" />
    </head>
    <body>
      <header class="exp-topbar">
        <div class="exp-topbar-inner">
          <a class="exp-brand" href="/home">Innovate</a>

          <button class="exp-pill" id="cityBtn" type="button" title="Change city">
            <span id="cityLabel">Hyderabad</span>
            <span style="opacity:0.7;">‚ñæ</span>
          </button>

          <div class="exp-search exp-search-desktop" title="Search">
            <span style="opacity:0.7;">üîé</span>
            <input id="searchInput" type="text" placeholder="Search experiences..." />
          </div>

          <div class="exp-actions">
            <button class="exp-icon-btn exp-search-mobile-btn" id="mobileSearchBtn" type="button" title="Search" style="display: none;">üîé</button>
            <button class="exp-pill" id="filtersBtn" type="button"><span class="filter-text">Filters</span><span class="filter-icon" style="display: none;">‚öôÔ∏è</span></button>
            <button class="exp-icon-btn" id="openCreateEvent" type="button" title="Create event">Ôºã</button>
            <a class="exp-icon-btn" href="/notifications" title="Notifications" style="text-decoration:none;">üîî</a>
          </div>
          
          <!-- Mobile search overlay -->
          <div class="exp-search-mobile-overlay" id="mobileSearchOverlay" style="display: none;">
            <div class="exp-search-mobile-container">
              <button class="exp-icon-btn" id="closeMobileSearch" type="button">‚Üê</button>
              <input id="searchInputMobile" type="text" placeholder="Search experiences..." style="flex: 1; border: none; background: transparent; color: var(--ig-primary-text); font-size: 15px; outline: none;" />
            </div>
          </div>
        </div>
      </header>

      <main class="exp-main exp-page">
        <div>
          <div class="exp-title" id="expHeaderTitle">All Experiences</div>
          <div class="exp-subtitle" id="expHeaderSubtitle">Parties, concerts & trips in one place</div>
          <div class="exp-tabs" role="tablist">
            <button class="exp-tab active" data-exp-tab="discover" type="button">All Events</button>
            <button class="exp-tab" data-exp-tab="mine" type="button">My Events</button>
            <button class="exp-tab" data-exp-tab="passes" type="button">Passes</button>
            <button class="exp-tab" data-exp-tab="crosspath" type="button">Crosspath</button>
            <button class="exp-tab" data-exp-tab="reminders" type="button">Reminders</button>
          </div>
        </div>

        <section data-exp-panel="discover">
          <div id="expDiscoverGrid" class="exp-grid"></div>
        </section>

        <section data-exp-panel="mine" style="display:none;">
          <div id="expMyGrid" class="exp-grid"></div>
        </section>

        <section data-exp-panel="passes" style="display:none;">
          <div id="passesList" style="max-width: 900px; margin: 0 auto; display:flex; flex-direction:column; gap: 12px;"></div>
        </section>

        <section data-exp-panel="crosspath" style="display:none;">
          <div id="crosspathList" style="max-width: 760px; margin: 0 auto;"></div>
        </section>

        <section data-exp-panel="reminders" style="display:none;">
          <div id="remindersList" style="max-width: 760px; margin: 0 auto;"></div>
        </section>
      </main>

      <!-- Event detail overlay -->
      <div class="exp-overlay" id="eventOverlay">
        <div class="exp-detail" role="dialog" aria-modal="true">
          <div class="exp-detail-media">
            <img id="eventDetailImg" alt="Event" />
            <button class="exp-close" id="closeEventOverlay" type="button">‚úï</button>
          </div>
          <div class="exp-detail-panel">
            <div style="display:flex; justify-content:space-between; gap: 10px; align-items:flex-start;">
              <div style="min-width:0; flex: 1;">
                <div id="eventDetailTitle" style="font-weight: 900; font-size: 20px; letter-spacing: -0.4px;">Event</div>
                <div id="eventDetailPlace" style="color: var(--ig-secondary-text); margin-top: 4px;"></div>
              </div>
              <div style="display: flex; gap: 8px; align-items: center;">
                <button id="btnShareEvent" class="exp-icon-btn" type="button" title="Share event" style="background: rgba(0,149,246,0.15); border-color: rgba(0,149,246,0.4);">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8M16 6l-4-4-4 4M12 2v13"/>
                  </svg>
                </button>
                <div id="eventDetailPrice" style="font-weight: 900; color: #00d4aa;"></div>
              </div>
            </div>

            <!-- Live Countdown Timer -->
            <div style="margin-top: 16px; padding: 16px; background: linear-gradient(135deg, rgba(0,149,246,0.1) 0%, rgba(168,85,247,0.1) 100%); border-radius: 16px; border: 1px solid rgba(0,149,246,0.2);">
              <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; text-align: center;" id="countdownTimer">
                <div>
                  <div style="font-size: 28px; font-weight: 900; color: #0095f6;" id="days">00</div>
                  <div style="font-size: 11px; color: var(--ig-secondary-text); margin-top: 4px;">DAYS</div>
                </div>
                <div>
                  <div style="font-size: 28px; font-weight: 900; color: #a855f7;" id="hours">00</div>
                  <div style="font-size: 11px; color: var(--ig-secondary-text); margin-top: 4px;">HOURS</div>
                </div>
                <div>
                  <div style="font-size: 28px; font-weight: 900; color: #ec4899;" id="minutes">00</div>
                  <div style="font-size: 11px; color: var(--ig-secondary-text); margin-top: 4px;">MINS</div>
                </div>
                <div>
                  <div style="font-size: 28px; font-weight: 900; color: #f59e0b;" id="seconds">00</div>
                  <div style="font-size: 11px; color: var(--ig-secondary-text); margin-top: 4px;">SECS</div>
                </div>
              </div>
            </div>

            <div class="exp-kpis" style="margin-top: 16px;">
              <div class="exp-kpi" style="background: rgba(0,149,246,0.08); border-color: rgba(0,149,246,0.2);">
                <div class="exp-kpi-val" id="kpiInterested" style="color: #0095f6;">0+</div>
                <div class="exp-kpi-lbl">Interested</div>
              </div>
              <div class="exp-kpi" style="background: rgba(168,85,247,0.08); border-color: rgba(168,85,247,0.2);">
                <div class="exp-kpi-val" id="kpiCountdown" style="color: #a855f7;">‚Äî</div>
                <div class="exp-kpi-lbl">Starts in</div>
              </div>
              <div class="exp-kpi" style="background: rgba(236,72,153,0.08); border-color: rgba(236,72,153,0.2);">
                <div class="exp-kpi-val" id="kpiPopularity" style="color: #ec4899;">‚Äî</div>
                <div class="exp-kpi-lbl">Popularity</div>
              </div>
            </div>

            <div class="exp-section" style="background: rgba(255,255,255,0.04); border-color: rgba(245,158,11,0.2);">
              <div style="font-weight: 900; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                <span style="color: #f59e0b;">üìã</span> Quick look
              </div>
              <div class="exp-row">
                <strong style="width: 140px; display: flex; align-items: center; gap: 6px;">
                  <span style="color: #0095f6;">üïê</span> Event timings
                </strong> 
                <span id="qlTime"></span>
              </div>
              <div class="exp-row">
                <strong style="width: 140px; display: flex; align-items: center; gap: 6px;">
                  <span style="color: #a855f7;">üé≠</span> Category
                </strong> 
                <span id="qlCategory"></span>
              </div>
              <div class="exp-row">
                <strong style="width: 140px; display: flex; align-items: center; gap: 6px;">
                  <span style="color: #ec4899;">üë§</span> Organized by
                </strong> 
                <span id="qlOrganizer"></span>
              </div>
              <div class="exp-row">
                <strong style="width: 140px; display: flex; align-items: center; gap: 6px;">
                  <span style="color: #f59e0b;">‚ö†Ô∏è</span> Important note
                </strong> 
                <span id="qlNote"></span>
              </div>
            </div>

            <div class="exp-section" id="eventDetailDescWrap" style="display:block; background: rgba(255,255,255,0.04); border-color: rgba(0,212,170,0.2);">
              <div style="font-weight: 900; margin-bottom: 6px; display: flex; align-items: center; gap: 8px;">
                <span style="color: #00d4aa;">‚ÑπÔ∏è</span> About
              </div>
              <div id="eventDetailDesc" style="color: var(--ig-secondary-text); white-space: pre-wrap;"></div>
            </div>

            <div style="overflow-x: auto; overflow-y: hidden; -webkit-overflow-scrolling: touch; margin: 0 -20px; padding: 0 20px;">
              <div class="exp-cta" style="display: flex; gap: 12px; min-width: max-content; padding-bottom: 4px;">
                <button class="exp-btn primary" id="btnSelectTickets" type="button" style="min-width: 140px;">Select Tickets</button>
                <button class="exp-btn" id="btnEditEvent" type="button" style="display:none; min-width: 140px;">Edit Event</button>
                <button class="exp-btn" id="btnDeleteEvent" type="button" style="display:none; min-width: 120px; background: rgba(239,68,68,0.2); color: #ef4444; border: 1px solid rgba(239,68,68,0.3);">Delete</button>
                <button class="exp-btn" id="btnOrders" type="button" style="display:none; min-width: 120px;">Orders</button>
                <button class="exp-btn" id="btnCheckin" type="button" style="display:none; min-width: 120px;">Check-in</button>
                <button class="exp-btn" id="btnSecurityStaff" type="button" style="display:none; min-width: 140px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">üîê Security Staff</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Filters overlay + drawer -->
      <div class="exp-overlay" id="filtersOverlay"></div>
      <div class="exp-drawer" id="filtersDrawer" aria-label="Filters">
        <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px;">
          <div style="font-weight: 900; font-size: 16px;">Filters</div>
          <button class="exp-icon-btn" id="closeFilters" type="button">‚úï</button>
        </div>
        <div class="exp-field">
          <label>City</label>
          <select id="filterCity">
            <option value="">All Cities</option>
          </select>
        </div>
        <div class="exp-field">
          <label>Category</label>
          <select id="filterCategory">
            <option value="">All Categories</option>
          </select>
        </div>
        <div class="exp-hint">Tip: Press Enter in search to apply.</div>
        <div style="display:flex; gap: 10px; margin-top: 16px;">
          <button class="exp-btn" type="button" id="applyFilters">Apply</button>
          <button class="exp-btn" type="button" id="clearFilters" style="background: rgba(255,255,255,0.1);">Clear</button>
        </div>
      </div>

      <!-- Tickets modal -->
      <div id="ticketsModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 650px;">
          <div class="ig-modal-item" style="padding: 24px; text-align: left; background: linear-gradient(180deg, rgba(18,18,18,1) 0%, rgba(10,10,10,1) 100%);">
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px; margin-bottom: 20px;">
              <div>
                <div id="ticketsTitle" style="font-weight: 900; font-size: 22px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">üéüÔ∏è Select Tickets</div>
                <div id="ticketsSubtitle" style="color: var(--ig-secondary-text); margin-top: 6px; font-size: 13px;"></div>
              </div>
              <button id="closeTickets" type="button" class="exp-icon-btn" style="width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-size: 18px;">‚úï</button>
            </div>

            <div id="ticketTypes" style="display:flex; flex-direction:column; gap: 14px; margin-bottom: 20px; max-height: 400px; overflow-y: auto; padding-right: 4px;"></div>

            <div style="display:flex; gap: 14px; align-items:center; padding: 16px; background: rgba(255,255,255,0.04); border-radius: 16px; border: 1px solid rgba(255,255,255,0.08);">
              <div style="display: flex; align-items: center; gap: 10px; flex: 1;">
                <div style="font-weight: 900; color: var(--ig-primary-text); font-size: 15px;">Quantity</div>
                <input id="ticketQty" type="number" min="1" max="10" value="1" style="width: 80px; height: 44px; border-radius: 12px; border: 1.5px solid rgba(102,126,234,0.3); background: rgba(102,126,234,0.08); color: var(--ig-primary-text); padding: 0 12px; font-weight: 700; font-size: 16px; text-align: center;" />
              </div>
              <div id="ticketTotal" style="font-weight: 900; color: #00d4aa; font-size: 16px;"></div>
            </div>

            <div style="display:flex; gap: 10px; margin-top: 18px;">
              <button class="exp-btn primary" type="button" id="btnCheckout" style="width: 100%; height: 50px; font-size: 16px; font-weight: 900; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; position: relative; overflow: hidden;">Confirm & Proceed</button>
            </div>

            <div id="ticketsResult" style="margin-top: 14px;"></div>
          </div>
        </div>
      </div>

      <!-- Orders modal -->
      <div id="ordersModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 850px; width: 90%;">
          <div class="ig-modal-item" style="padding: 24px; text-align: left; background: linear-gradient(180deg, rgba(18,18,18,1) 0%, rgba(10,10,10,1) 100%);">
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px; margin-bottom: 20px;">
              <div>
                <div id="ordersTitle" style="font-weight: 900; font-size: 22px; background: linear-gradient(135deg, #f59e0b 0%, #ec4899 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">üìã Manage Orders</div>
                <div id="ordersSubtitle" style="color: var(--ig-secondary-text); margin-top: 6px; font-size: 13px;"></div>
              </div>
              <button id="closeOrders" type="button" class="exp-icon-btn" style="width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-size: 18px;">‚úï</button>
            </div>
            
            <!-- Order Tabs -->
            <div style="display: flex; gap: 4px; margin-bottom: 20px; border-bottom: 2px solid rgba(255,255,255,0.08); padding-bottom: 0; background: rgba(255,255,255,0.02); border-radius: 12px 12px 0 0; padding: 4px 4px 0 4px;">
              <button id="orderTabPending" class="order-tab active" data-status="pending" style="flex: 1; padding: 12px 20px; background: none; border: none; color: var(--ig-secondary-text); cursor: pointer; font-weight: 700; border-bottom: 3px solid transparent; transition: all 0.3s ease; position: relative; border-radius: 8px 8px 0 0;">
                <span style="display: flex; align-items: center; justify-content: center; gap: 8px;">‚è≥ Pending</span>
              </button>
              <button id="orderTabConfirmed" class="order-tab" data-status="paid" style="flex: 1; padding: 12px 20px; background: none; border: none; color: var(--ig-secondary-text); cursor: pointer; font-weight: 700; border-bottom: 3px solid transparent; transition: all 0.3s ease; position: relative; border-radius: 8px 8px 0 0;">
                <span style="display: flex; align-items: center; justify-content: center; gap: 8px;">‚úì Confirmed</span>
              </button>
              <button id="orderTabAll" class="order-tab" data-status="all" style="flex: 1; padding: 12px 20px; background: none; border: none; color: var(--ig-secondary-text); cursor: pointer; font-weight: 700; border-bottom: 3px solid transparent; transition: all 0.3s ease; position: relative; border-radius: 8px 8px 0 0;">
                <span style="display: flex; align-items: center; justify-content: center; gap: 8px;">üìä All</span>
              </button>
            </div>

            <div id="ordersList" style="display:flex; flex-direction:column; gap: 14px; max-height: 65vh; overflow-y: auto; padding-right: 4px;"></div>
          </div>
        </div>
      </div>

      <!-- Manage passes modal -->
      <div id="managePassesModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 820px;">
          <div class="ig-modal-item" style="padding: 18px; text-align: left;">
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px;">
              <div>
                <div id="managePassesTitle" style="font-weight: 900; font-size: 18px;">Manage Pass Types</div>
                <div id="managePassesSubtitle" style="color: var(--ig-secondary-text); margin-top: 4px; font-size: 13px;"></div>
              </div>
              <button id="closeManagePasses" type="button" class="exp-icon-btn">‚úï</button>
            </div>

            <div id="managePassesList" style="display:flex; flex-direction:column; gap: 10px; margin-top: 14px;"></div>

            <div class="exp-section" style="margin-top: 14px;">
              <div style="font-weight: 900; margin-bottom: 8px;">Create pass type</div>
              <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div class="exp-field"><label>Name</label><input id="newName" placeholder="VIP / General" /></div>
                <div class="exp-field"><label>Mode</label>
                  <select id="newMode">
                    <option value="free">Free</option>
                    <option value="venue">Pay at venue</option>
                    <option value="contact">Contact organizer</option>
                    <option value="dm">DM organizer</option>
                    <option value="online">Online (future)</option>
                  </select>
                </div>
                <div class="exp-field"><label>Price (INR)</label><input id="newPrice" type="number" min="0" step="0.01" placeholder="0" /></div>
                <div class="exp-field"><label>Capacity (optional)</label><input id="newQty" type="number" min="1" step="1" placeholder="" /></div>
              </div>
              <div class="exp-field"><label>Description</label><textarea id="newDesc" placeholder="What's included?"></textarea></div>
              <div class="exp-field"><label>Contact text (optional)</label><input id="newContact" placeholder="WhatsApp/Phone/Instructions" /></div>
              <button class="exp-btn primary" id="btnCreatePassType" type="button">Create</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Edit pass modal -->
      <div id="editPassModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 720px;">
          <div class="ig-modal-item" style="padding: 18px; text-align: left;">
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px;">
              <div style="font-weight: 900; font-size: 18px;">Edit pass type</div>
              <button id="closeEditPass" type="button" class="exp-icon-btn">‚úï</button>
            </div>
            <input id="editTypeId" type="hidden" />
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 12px;">
              <div class="exp-field"><label>Name</label><input id="editName" /></div>
              <div class="exp-field"><label>Mode</label>
                <select id="editMode">
                  <option value="free">Free</option>
                  <option value="venue">Pay at venue</option>
                  <option value="contact">Contact organizer</option>
                  <option value="dm">DM organizer</option>
                  <option value="online">Online (future)</option>
                </select>
              </div>
              <div class="exp-field"><label>Price (INR)</label><input id="editPrice" type="number" min="0" step="0.01" /></div>
              <div class="exp-field"><label>Capacity (optional)</label><input id="editQty" type="number" min="1" step="1" /></div>
            </div>
            <div class="exp-field"><label>Description</label><textarea id="editDesc"></textarea></div>
            <div class="exp-field"><label>Contact text</label><input id="editContact" /></div>
            <label style="display:flex; gap: 10px; align-items:center; margin-top: 10px; color: var(--ig-secondary-text);">
              <input id="editActive" type="checkbox" /> Active
            </label>
            <div style="display:flex; gap: 10px; margin-top: 12px;">
              <button class="exp-btn primary" id="saveEditPass" type="button">Save</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Edit event modal -->
      <div id="editEventModal" class="ig-modal-overlay" style="display:none;">
        <div style="max-width: 760px; width: 90%; max-height: 90vh; margin: auto; display: flex; flex-direction: column; background: var(--ig-secondary-background); border-radius: 12px; overflow: hidden;">
          <div style="padding: 18px; border-bottom: 1px solid var(--ig-border); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
            <div style="font-weight: 900; font-size: 18px;">Edit event</div>
            <button id="closeEditEvent" type="button" class="exp-icon-btn">‚úï</button>
          </div>
          
          <div id="editEventModalContent" style="overflow-y: auto; overflow-x: hidden; padding: 18px;">
            <input type="hidden" id="eeEventId" />
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px;">
              <div class="exp-field"><label>Title</label><input id="eeTitle" placeholder="Event title" required /></div>
              <div class="exp-field"><label>Date & time</label><input id="eeDate" type="datetime-local" required /></div>
              <div class="exp-field"><label>City</label><input id="eeCity" placeholder="e.g., Hyderabad, Khammam" /></div>
              <div class="exp-field"><label>Category</label><input id="eeCategory" placeholder="e.g., Concert, Party, Trip" /></div>
              <div class="exp-field" style="grid-column: 1 / -1;"><label>Venue / Location</label><input id="eeLocation" placeholder="Venue name, area" /></div>
              <div class="exp-field" style="grid-column: 1 / -1;">
                <label>Upload Cover Photo (optional)</label>
                <input id="eeCoverFile" type="file" accept="image/*" style="padding: 8px;" />
                <small style="color: var(--ig-secondary-text); display: block; margin-top: 4px;">Or use URL below</small>
              </div>
              <div class="exp-field" style="grid-column: 1 / -1;"><label>Cover image URL (optional)</label><input id="eeCover" placeholder="https://..." /></div>
              <div class="exp-field"><label>Maximum Persons Allowed (optional)</label><input id="eeMaxPersons" type="number" min="1" placeholder="e.g., 100" /></div>
              <div class="exp-field"><label>Organizer name (optional)</label><input id="eeOrganizer" placeholder="Brand / Organizer" /></div>
            </div>
            
            <div class="exp-field"><label>Important note (optional)</label><textarea id="eeNote" placeholder="Entry rules, ID required, age restrictions, dress code, what to bring, etc..." style="min-height: 80px;"></textarea></div>
            
            <!-- Pass Types Section -->
            <div style="margin-top: 16px; padding: 16px; background: rgba(168,85,247,0.05); border: 1px solid rgba(168,85,247,0.2); border-radius: 12px;">
              <div style="font-weight: 900; margin-bottom: 12px; font-size: 16px; display: flex; align-items: center; gap: 8px;">
                üéüÔ∏è Manage Pass Types / Tickets
              </div>
              
              <!-- Existing pass types list -->
              <div id="eePassTypesList" style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 12px;"></div>
              
              <!-- Add new pass type form -->
              <details style="margin-top: 12px;">
                <summary style="cursor: pointer; font-weight: 600; padding: 10px; background: var(--ig-background); border-radius: 8px; border: 1px solid var(--ig-border); list-style: none; display: flex; align-items: center; gap: 8px;">
                  <span style="color: #a855f7;">+</span> <strong>Add New Pass Type</strong>
                </summary>
                <div style="background: var(--ig-background); padding: 12px; border-radius: 8px; border: 1px solid var(--ig-border); margin-top: 8px;">
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <div class="exp-field">
                      <label>Name</label>
                      <input id="eeNewPassName" placeholder="VIP / General / Early Bird" />
                    </div>
                    <div class="exp-field">
                      <label>Mode</label>
                      <select id="eeNewPassMode" style="background: var(--ig-secondary-background); color: var(--ig-primary-text);">
                        <option value="free">Free</option>
                        <option value="paid">Paid</option>
                      </select>
                    </div>
                    <div class="exp-field">
                      <label>Price (INR)</label>
                      <input id="eeNewPassPrice" type="number" min="0" step="0.01" placeholder="0" />
                    </div>
                    <div class="exp-field">
                      <label>Capacity (optional)</label>
                      <input id="eeNewPassCapacity" type="number" min="1" placeholder="e.g., 50" />
                    </div>
                  </div>
                  <!-- Payment methods (shown only when Paid is selected) -->
                  <div id="eePaymentMethods" style="display: none; margin-top: 10px; padding: 10px; background: rgba(168,85,247,0.05); border: 1px solid rgba(168,85,247,0.2); border-radius: 6px;">
                    <div style="font-weight: 600; margin-bottom: 8px; font-size: 13px; color: var(--ig-primary-text);">Payment Methods:</div>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                      <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="checkbox" id="eePaymentDM" style="width: 16px; height: 16px;" />
                        <span style="font-size: 14px;">DM organizer</span>
                      </label>
                      <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="checkbox" id="eePaymentVenue" style="width: 16px; height: 16px;" />
                        <span style="font-size: 14px;">Pay at venue</span>
                      </label>
                      <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="checkbox" id="eePaymentOnline" style="width: 16px; height: 16px;" />
                        <span style="font-size: 14px;">Online payment</span>
                      </label>
                    </div>
                  </div>
                  <div class="exp-field">
                    <label>Description (optional)</label>
                    <textarea id="eeNewPassDesc" placeholder="What's included? Benefits?" style="min-height: 60px;"></textarea>
                  </div>
                  <div class="exp-field">
                    <label>Contact text (optional)</label>
                    <input id="eeNewPassContact" placeholder="WhatsApp/Phone/Instructions" />
                  </div>
                  <div style="display: flex; gap: 8px;">
                    <button class="exp-btn primary" id="btnAddPassTypeInEdit" type="button" style="background: rgba(168,85,247,0.15); color: #a855f7; border-color: rgba(168,85,247,0.3); flex: 1;">Add Pass Type</button>
                    <button class="exp-btn" id="btnCancelPassTypeEdit" type="button" style="background: rgba(255,59,48,0.1); color: #ff3b30; border-color: rgba(255,59,48,0.3); display: none;">Cancel</button>
                  </div>
                </div>
              </details>
            </div>
            
            <div class="exp-field"><label>Description</label><textarea id="eeDesc" placeholder="Describe the event..."></textarea></div>
            <label style="display:flex; gap: 10px; align-items:center; margin-top: 10px; color: var(--ig-secondary-text);">
              <input id="eePublic" type="checkbox" checked /> Public listing (discover)
            </label>

            <div style="display:flex; gap: 10px; margin-top: 12px;">
              <button class="exp-btn primary" id="editEventSubmit" type="button">Update Event</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Create event modal -->
      <div id="createEventModal" class="ig-modal-overlay" style="display:none;">
        <div style="max-width: 760px; width: 90%; max-height: 90vh; margin: auto; display: flex; flex-direction: column; background: var(--ig-secondary-background); border-radius: 12px; overflow: hidden;">
          <div style="padding: 18px; border-bottom: 1px solid var(--ig-border); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
            <div style="font-weight: 900; font-size: 18px;">Create event</div>
            <button id="closeCreateEvent" type="button" class="exp-icon-btn">‚úï</button>
          </div>
          
          <div id="createEventModalContent" style="overflow-y: auto; overflow-x: hidden; padding: 18px;">
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px;">
              <div class="exp-field"><label>Title</label><input id="ceTitle" placeholder="Event title" required /></div>
              <div class="exp-field"><label>Date & time</label><input id="ceDate" type="datetime-local" required /></div>
              <div class="exp-field"><label>City</label><input id="ceCity" placeholder="e.g., Hyderabad, Khammam" /></div>
              <div class="exp-field"><label>Category</label><input id="ceCategory" placeholder="e.g., Concert, Party, Trip" /></div>
              <div class="exp-field" style="grid-column: 1 / -1;"><label>Venue / Location</label><input id="ceLocation" placeholder="Venue name, area" /></div>
              <div class="exp-field" style="grid-column: 1 / -1;">
                <label>Upload Cover Photo (optional)</label>
                <input id="ceCoverFile" type="file" accept="image/*" style="padding: 8px;" />
                <small style="color: var(--ig-secondary-text); display: block; margin-top: 4px;">Or use URL below</small>
              </div>
              <div class="exp-field" style="grid-column: 1 / -1;"><label>Cover image URL (optional)</label><input id="ceCover" placeholder="https://..." /></div>
              <div class="exp-field"><label>Maximum Persons Allowed (optional)</label><input id="ceMaxPersons" type="number" min="1" placeholder="e.g., 100" /></div>
              <div class="exp-field"><label>Organizer name (optional)</label><input id="ceOrganizer" placeholder="Brand / Organizer" /></div>
            </div>
            
            <div class="exp-field"><label>Important note (optional)</label><textarea id="ceNote" placeholder="Entry rules, ID required, age restrictions, dress code, what to bring, etc..." style="min-height: 80px;"></textarea></div>
            
            <!-- Pass Types Section -->
            <div style="margin-top: 16px; padding: 16px; background: rgba(0,149,246,0.05); border: 1px solid rgba(0,149,246,0.2); border-radius: 12px;">
              <div style="font-weight: 900; margin-bottom: 12px; font-size: 16px; display: flex; align-items: center; gap: 8px;">
                üéüÔ∏è Pass Types / Tickets
              </div>
              
              <!-- List of added pass types -->
              <div id="cePassTypesList" style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 12px;"></div>
              
              <!-- Add new pass type form -->
              <div style="background: var(--ig-background); padding: 12px; border-radius: 8px; border: 1px solid var(--ig-border);">
                <div style="font-weight: 600; margin-bottom: 10px; font-size: 14px;">Add Pass Type</div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                  <div class="exp-field">
                    <label>Name</label>
                    <input id="cePassName" placeholder="VIP / General / Early Bird" />
                  </div>
                  <div class="exp-field">
                    <label>Mode</label>
                    <select id="cePassMode" style="background: var(--ig-secondary-background); color: var(--ig-primary-text);">
                      <option value="free">Free</option>
                      <option value="paid">Paid</option>
                    </select>
                  </div>
                  <div class="exp-field">
                    <label>Price (INR)</label>
                    <input id="cePassPrice" type="number" min="0" step="0.01" placeholder="0" />
                  </div>
                  <div class="exp-field">
                    <label>Capacity (optional)</label>
                    <input id="cePassCapacity" type="number" min="1" placeholder="e.g., 50" />
                  </div>
                </div>
                <!-- Payment methods (shown only when Paid is selected) -->
                <div id="cePaymentMethods" style="display: none; margin-top: 10px; padding: 10px; background: rgba(0,149,246,0.05); border: 1px solid rgba(0,149,246,0.2); border-radius: 6px;">
                  <div style="font-weight: 600; margin-bottom: 8px; font-size: 13px; color: var(--ig-primary-text);">Payment Methods:</div>
                  <div style="display: flex; flex-direction: column; gap: 8px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                      <input type="checkbox" id="cePaymentDM" style="width: 16px; height: 16px;" />
                      <span style="font-size: 14px;">DM organizer</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                      <input type="checkbox" id="cePaymentVenue" style="width: 16px; height: 16px;" />
                      <span style="font-size: 14px;">Pay at venue</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                      <input type="checkbox" id="cePaymentOnline" style="width: 16px; height: 16px;" />
                      <span style="font-size: 14px;">Online payment</span>
                    </label>
                  </div>
                </div>
                <div class="exp-field">
                  <label>Description (optional)</label>
                  <textarea id="cePassDesc" placeholder="What's included? Benefits?" style="min-height: 60px;"></textarea>
                </div>
                <div class="exp-field">
                  <label>Contact text (optional)</label>
                  <input id="cePassContact" placeholder="WhatsApp/Phone/Instructions" />
                </div>
                <button class="exp-btn" id="btnAddPassType" type="button" style="background: rgba(0,149,246,0.15); color: #0095f6; border-color: rgba(0,149,246,0.3);">+ Add Pass Type</button>
              </div>
              
              <small style="color: var(--ig-secondary-text); display: block; margin-top: 10px;">
                üí° Tip: Add at least one pass type. You can also add more later via "Manage Pass Types"
              </small>
            </div>
            
            <div class="exp-field"><label>Description</label><textarea id="ceDesc" placeholder="Describe the event..."></textarea></div>
            <label style="display:flex; gap: 10px; align-items:center; margin-top: 10px; color: var(--ig-secondary-text);">
              <input id="cePublic" type="checkbox" checked /> Public listing (discover)
            </label>

            <div style="display:flex; gap: 10px; margin-top: 12px;">
              <button class="exp-btn primary" id="createEventSubmit" type="button">Create</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Check-in modal -->
      <div id="checkinModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 620px;">
          <div class="ig-modal-item" style="padding: 24px; text-align: left;">
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px; margin-bottom: 20px;">
              <div>
                <div style="font-weight: 900; font-size: 20px; color: var(--ig-primary-text); margin-bottom: 4px;">Verify Pass</div>
                <div style="font-size: 13px; color: var(--ig-secondary-text);">Scan or enter pass code to check-in attendees</div>
              </div>
              <button id="closeCheckin" type="button" class="exp-icon-btn">‚úï</button>
            </div>
            
            <!-- Scanner Method Toggle -->
            <div style="display: flex; gap: 8px; margin-bottom: 16px;">
              <button id="btnScanMethod" class="exp-btn" type="button" style="flex: 1; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">üì∑ Scan QR Code</button>
              <button id="btnManualMethod" class="exp-btn" type="button" style="flex: 1;">‚å®Ô∏è Enter Manually</button>
            </div>
            
            <!-- QR Scanner Section -->
            <div id="qrScannerSection" style="display: none;">
              <div style="background: rgba(0,0,0,0.2); border-radius: 16px; padding: 16px; margin-bottom: 16px; border: 2px solid rgba(102,126,234,0.3);">
                <div id="qr-reader" style="border-radius: 12px; overflow: hidden;"></div>
                <div id="qr-reader-status" style="margin-top: 12px; text-align: center; font-size: 13px; color: var(--ig-secondary-text); display: none;">
                  <div style="font-weight: 700; margin-bottom: 4px;">üì∑ Camera Ready</div>
                  <div>Point camera at QR code to scan</div>
                </div>
              </div>
            </div>
            
            <!-- Manual Entry Section -->
            <div id="manualEntrySection">
              <div class="exp-field">
                <label style="font-weight: 700; font-size: 13px; color: var(--ig-secondary-text); text-transform: uppercase; letter-spacing: 0.5px;">Pass Code</label>
                <input id="checkinCode" placeholder="Paste the full pass code here" style="font-family: 'Courier New', monospace; font-size: 14px; padding: 12px;" />
              </div>
              <button class="exp-btn primary" id="btnCheckinGo" type="button" style="width: 100%; padding: 14px; font-weight: 800; font-size: 15px;">üîç Verify & Check-in</button>
            </div>
            
            <!-- Result Display -->
            <div id="checkinResult" style="margin-top: 16px; display: none;"></div>
          </div>
        </div>
      </div>

      <!-- Security Staff Management Modal -->
      <div id="securityStaffModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 700px; max-height: 90vh; display: flex; flex-direction: column;">
          <div class="ig-modal-item" style="padding: 0; text-align: left; flex: 1; display: flex; flex-direction: column; min-height: 0;">
            <!-- Fixed Header -->
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px; padding: 24px; background: var(--ig-background); border-bottom: 2px solid rgba(102,126,234,0.3); flex-shrink: 0;">
              <div>
                <div style="font-weight: 900; font-size: 22px; color: var(--ig-primary-text); margin-bottom: 4px;">üîê Security Staff</div>
                <div style="font-size: 13px; color: var(--ig-secondary-text);">Manage venue check-in personnel</div>
              </div>
              <button id="closeSecurityStaff" type="button" class="exp-icon-btn">‚úï</button>
            </div>
            
            <!-- Scrollable Content -->
            <div style="padding: 24px; overflow-y: auto; flex: 1;">
              <!-- Section 1: Scanner App Link -->
              <div style="background: linear-gradient(135deg, rgba(102,126,234,0.2) 0%, rgba(118,75,162,0.2) 100%); padding: 20px; border-radius: 16px; border: 2px solid rgba(102,126,234,0.4); margin-bottom: 24px; box-shadow: 0 4px 12px rgba(102,126,234,0.15);">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 12px;">
                  <div style="background: rgba(102,126,234,0.3); width: 44px; height: 44px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px;">üì±</div>
                  <div>
                    <div style="font-weight: 900; font-size: 16px; color: var(--ig-primary-text);">Mobile Scanner App</div>
                    <div style="font-size: 12px; color: var(--ig-secondary-text);">Share this link with security staff</div>
                  </div>
                </div>
                <div style="background: rgba(0,0,0,0.4); padding: 12px; border-radius: 10px; font-family: 'Courier New', monospace; font-size: 12px; color: #00d4aa; word-break: break-all; margin-bottom: 12px; border: 1px solid rgba(0,212,170,0.3);" id="scannerUrl"></div>
                <button class="exp-btn" onclick="copyScannerURL()" style="width: 100%; font-size: 14px; padding: 12px; font-weight: 700; background: rgba(0,212,170,0.2); border-color: rgba(0,212,170,0.4); color: #00d4aa;">üìã Copy Scanner Link</button>
              </div>

              <!-- Section 2: Add New Staff -->
              <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.15); margin-bottom: 24px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 16px;">
                  <div style="background: rgba(0,212,170,0.2); width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 22px;">‚ûï</div>
                  <div style="font-weight: 900; font-size: 16px; color: var(--ig-primary-text);">Add New Staff Member</div>
                </div>
                <div class="exp-field" style="margin-bottom: 14px;">
                  <label style="font-size: 12px; font-weight: 700; color: var(--ig-secondary-text); text-transform: uppercase; letter-spacing: 0.5px;">Full Name</label>
                  <input id="staffFullName" placeholder="e.g., John Smith" style="padding: 12px; font-size: 14px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.15);" />
                </div>
                <div class="exp-field" style="margin-bottom: 14px;">
                  <label style="font-size: 12px; font-weight: 700; color: var(--ig-secondary-text); text-transform: uppercase; letter-spacing: 0.5px;">Username (Login ID)</label>
                  <input id="staffUsername" placeholder="Min 3 characters" style="padding: 12px; font-size: 14px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.15);" />
                </div>
                <div class="exp-field" style="margin-bottom: 16px;">
                  <label style="font-size: 12px; font-weight: 700; color: var(--ig-secondary-text); text-transform: uppercase; letter-spacing: 0.5px;">Password</label>
                  <input id="staffPassword" type="password" placeholder="Min 6 characters" style="padding: 12px; font-size: 14px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.15);" />
                </div>
                <button class="exp-btn primary" id="btnAddStaff" type="button" style="width: 100%; padding: 14px; font-size: 15px; font-weight: 800; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none;">‚úì Create Staff Account</button>
                <div id="addStaffResult" class="exp-hint" style="margin-top: 10px; font-size: 13px; font-weight: 600;"></div>
              </div>

              <!-- Section 3: Current Staff List -->
              <div>
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 16px;">
                  <div style="background: rgba(255,255,255,0.1); width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 22px;">üë•</div>
                  <div>
                    <div style="font-weight: 900; font-size: 16px; color: var(--ig-primary-text);">Active Staff (<span id="staffCount">0</span>)</div>
                    <div style="font-size: 12px; color: var(--ig-secondary-text);">Manage your security team</div>
                  </div>
                </div>
                <div id="staffList" style="max-height: 400px; overflow-y: auto; padding-right: 4px;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Bottom Navigation -->
      <nav class="ig-bottom-nav">
        <a href="/home" class="ig-bottom-nav-item">
          <svg aria-label="Home" viewBox="0 0 24 24" width="24">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            <polyline points="9 22 9 12 15 12 15 22" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="ig-bottom-nav-label">Home</span>
        </a>
        <a href="/communities" class="ig-bottom-nav-item">
          <svg aria-label="Communities" viewBox="0 0 24 24" width="24">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="ig-bottom-nav-label">Communities</span>
        </a>
        <a href="/events" class="ig-bottom-nav-item active">
          <svg aria-label="Events" viewBox="0 0 24 24" width="24">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" fill="none"/>
            <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
          </svg>
          <span class="ig-bottom-nav-label">Events</span>
        </a>
        <a href="#" class="ig-bottom-nav-item" onclick="(function(e){e.preventDefault(); var u=localStorage.getItem('user'); if(u){ try{u=JSON.parse(u); if(u.id) location.href='/profile/'+u.id; }catch{}}})(event)">
          <svg aria-label="Profile" viewBox="0 0 24 24" width="24">
            <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M5.5 21v-2a7.5 7.5 0 0 1 13 0v2" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
          </svg>
          <span class="ig-bottom-nav-label">Profile</span>
        </a>
      </nav>

      <script src="/socket.io/socket.io.js"></script>
      <script src="/js/app.js"></script>
      <script src="/js/instagram-theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
      <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
      <script src="/js/events-experiences.js"></script>
      
      <script>
        // Mobile search functionality
        (function() {
          const mobileSearchBtn = document.getElementById('mobileSearchBtn');
          const mobileSearchOverlay = document.getElementById('mobileSearchOverlay');
          const closeMobileSearch = document.getElementById('closeMobileSearch');
          const searchInput = document.getElementById('searchInput');
          const searchInputMobile = document.getElementById('searchInputMobile');
          
          if (mobileSearchBtn && mobileSearchOverlay) {
            // Open mobile search
            mobileSearchBtn.addEventListener('click', function() {
              mobileSearchOverlay.style.display = 'block';
              searchInputMobile.value = searchInput.value;
              searchInputMobile.focus();
            });
            
            // Close mobile search
            closeMobileSearch.addEventListener('click', function() {
              mobileSearchOverlay.style.display = 'none';
              searchInput.value = searchInputMobile.value;
              // Trigger search event if needed
              if (typeof window.onSearchChange === 'function') {
                window.onSearchChange();
              }
            });
            
            // Sync mobile search with desktop
            searchInputMobile.addEventListener('input', function() {
              searchInput.value = searchInputMobile.value;
              // Trigger search event if needed
              if (typeof window.onSearchChange === 'function') {
                window.onSearchChange();
              }
            });
            
            // Handle escape key to close
            searchInputMobile.addEventListener('keydown', function(e) {
              if (e.key === 'Escape') {
                closeMobileSearch.click();
              }
            });
          }
        })();
      </script>
    </body>
    </html>
