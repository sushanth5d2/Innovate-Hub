<!DOCTYPE html>
    <html lang="en" data-theme="dark">
    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Experiences - Innovate</title>
      <link rel="stylesheet" href="/css/instagram.css" />
      <link rel="stylesheet" href="/css/experiences.css" />
    </head>
    <body>
      <header class="exp-topbar">
        <div class="exp-topbar-inner">
          <a class="exp-brand" href="/home">Innovate</a>

          <button class="exp-pill" id="cityBtn" type="button" title="Change city">
            <span id="cityLabel">Hyderabad</span>
            <span style="opacity:0.7;">â–¾</span>
          </button>

          <div class="exp-search" title="Search">
            <span style="opacity:0.7;">ðŸ”Ž</span>
            <input id="searchInput" type="text" placeholder="Search experiences..." />
          </div>

          <div class="exp-actions">
            <button class="exp-pill" id="filtersBtn" type="button">Filters</button>
            <button class="exp-icon-btn" id="openCreateEvent" type="button" title="Create event">ï¼‹</button>
            <a class="exp-icon-btn" href="/notifications" title="Notifications" style="text-decoration:none;">ðŸ””</a>
          </div>
        </div>
      </header>

      <main class="exp-main exp-page">
        <div>
          <div class="exp-title" id="expHeaderTitle">All Experiences</div>
          <div class="exp-subtitle" id="expHeaderSubtitle">Parties, concerts & trips in one place</div>
          <div class="exp-tabs" role="tablist">
            <button class="exp-tab active" data-exp-tab="discover" type="button">All Events</button>
            <button class="exp-tab" data-exp-tab="mine" type="button">My Events</button>
            <button class="exp-tab" data-exp-tab="passes" type="button">Passes</button>
            <button class="exp-tab" data-exp-tab="crosspath" type="button">Crosspath</button>
            <button class="exp-tab" data-exp-tab="reminders" type="button">Reminders</button>
          </div>
        </div>

        <section data-exp-panel="discover">
          <div id="expDiscoverGrid" class="exp-grid"></div>
        </section>

        <section data-exp-panel="mine" style="display:none;">
          <div id="expMyGrid" class="exp-grid"></div>
        </section>

        <section data-exp-panel="passes" style="display:none;">
          <div id="passesList" style="max-width: 900px; margin: 0 auto; display:flex; flex-direction:column; gap: 12px;"></div>
        </section>

        <section data-exp-panel="crosspath" style="display:none;">
          <div id="crosspathList" style="max-width: 760px; margin: 0 auto;"></div>
        </section>

        <section data-exp-panel="reminders" style="display:none;">
          <div id="remindersList" style="max-width: 760px; margin: 0 auto;"></div>
        </section>
      </main>

      <!-- Event detail overlay -->
      <div class="exp-overlay" id="eventOverlay">
        <div class="exp-detail" role="dialog" aria-modal="true">
          <div class="exp-detail-media">
            <img id="eventDetailImg" alt="Event" />
            <button class="exp-close" id="closeEventOverlay" type="button">âœ•</button>
          </div>
          <div class="exp-detail-panel">
            <div style="display:flex; justify-content:space-between; gap: 10px; align-items:flex-start;">
              <div style="min-width:0;">
                <div id="eventDetailTitle" style="font-weight: 900; font-size: 20px; letter-spacing: -0.4px;">Event</div>
                <div id="eventDetailPlace" style="color: var(--ig-secondary-text); margin-top: 4px;"></div>
              </div>
              <div id="eventDetailPrice" style="font-weight: 900;"></div>
            </div>

            <div class="exp-kpis">
              <div class="exp-kpi"><div class="exp-kpi-val" id="kpiInterested">0</div><div class="exp-kpi-lbl">Interested</div></div>
              <div class="exp-kpi"><div class="exp-kpi-val" id="kpiCountdown">â€”</div><div class="exp-kpi-lbl">Starts in</div></div>
              <div class="exp-kpi"><div class="exp-kpi-val" id="kpiPopularity">â€”</div><div class="exp-kpi-lbl">Popularity</div></div>
            </div>

            <div class="exp-section">
              <div style="font-weight: 900; margin-bottom: 6px;">Quick look</div>
              <div class="exp-row"><strong style="width: 120px;">Event timings</strong> <span id="qlTime"></span></div>
              <div class="exp-row"><strong style="width: 120px;">Category</strong> <span id="qlCategory"></span></div>
              <div class="exp-row"><strong style="width: 120px;">Organized by</strong> <span id="qlOrganizer"></span></div>
              <div class="exp-row"><strong style="width: 120px;">Important note</strong> <span id="qlNote"></span></div>
            </div>

            <div class="exp-section" id="eventDetailDescWrap" style="display:block;">
              <div style="font-weight: 900; margin-bottom: 6px;">About</div>
              <div id="eventDetailDesc" style="color: var(--ig-secondary-text); white-space: pre-wrap;"></div>
            </div>

            <div class="exp-cta">
              <button class="exp-btn primary" id="btnSelectTickets" type="button">Select Tickets</button>
              <button class="exp-btn" id="btnManagePasses" type="button" style="display:none;">Manage Pass Types</button>
              <button class="exp-btn" id="btnOrders" type="button" style="display:none;">Orders</button>
              <button class="exp-btn" id="btnCheckin" type="button" style="display:none;">Check-in</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Filters overlay + drawer -->
      <div class="exp-overlay" id="filtersOverlay"></div>
      <div class="exp-drawer" id="filtersDrawer" aria-label="Filters">
        <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px;">
          <div style="font-weight: 900; font-size: 16px;">Filters</div>
          <button class="exp-icon-btn" id="closeFilters" type="button">âœ•</button>
        </div>
        <div class="exp-field">
          <label>City</label>
          <select id="filterCity">
            <option>Hyderabad</option>
            <option>Bengaluru</option>
            <option>Mumbai</option>
            <option>Delhi</option>
            <option>Chennai</option>
            <option>Pune</option>
            <option>Kolkata</option>
          </select>
        </div>
        <div class="exp-hint">Tip: Press Enter in search to apply.</div>
        <div style="display:flex; gap: 10px; margin-top: 16px;">
          <button class="exp-btn" type="button" id="applyFilters">Apply</button>
        </div>
      </div>

      <!-- Tickets modal -->
      <div id="ticketsModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 620px;">
          <div class="ig-modal-item" style="padding: 18px; text-align: left;">
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px;">
              <div>
                <div id="ticketsTitle" style="font-weight: 900; font-size: 18px;">Select Tickets</div>
                <div id="ticketsSubtitle" style="color: var(--ig-secondary-text); margin-top: 4px; font-size: 13px;"></div>
              </div>
              <button id="closeTickets" type="button" class="exp-icon-btn">âœ•</button>
            </div>

            <div id="ticketTypes" style="display:flex; flex-direction:column; gap: 10px; margin-top: 14px;"></div>

            <div style="display:flex; gap: 10px; align-items:center; margin-top: 14px;">
              <div style="font-weight: 900;">Qty</div>
              <input id="ticketQty" type="number" min="1" max="10" value="1" style="width: 100px; height: 42px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.12); background: rgba(255,255,255,0.03); color: var(--ig-primary-text); padding: 0 12px;" />
              <div id="ticketTotal" style="margin-left:auto; color: var(--ig-secondary-text);"></div>
            </div>

            <div style="display:flex; gap: 10px; margin-top: 14px;">
              <button class="exp-btn" type="button" id="btnCheckout">Confirm</button>
            </div>

            <div id="ticketsResult" style="margin-top: 12px;"></div>
          </div>
        </div>
      </div>

      <!-- Orders modal -->
      <div id="ordersModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 720px;">
          <div class="ig-modal-item" style="padding: 18px; text-align: left;">
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px;">
              <div>
                <div id="ordersTitle" style="font-weight: 900; font-size: 18px;">Manage Orders</div>
                <div id="ordersSubtitle" style="color: var(--ig-secondary-text); margin-top: 4px; font-size: 13px;"></div>
              </div>
              <button id="closeOrders" type="button" class="exp-icon-btn">âœ•</button>
            </div>
            <div id="ordersList" style="display:flex; flex-direction:column; gap: 10px; margin-top: 14px;"></div>
          </div>
        </div>
      </div>

      <!-- Manage passes modal -->
      <div id="managePassesModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 820px;">
          <div class="ig-modal-item" style="padding: 18px; text-align: left;">
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px;">
              <div>
                <div id="managePassesTitle" style="font-weight: 900; font-size: 18px;">Manage Pass Types</div>
                <div id="managePassesSubtitle" style="color: var(--ig-secondary-text); margin-top: 4px; font-size: 13px;"></div>
              </div>
              <button id="closeManagePasses" type="button" class="exp-icon-btn">âœ•</button>
            </div>

            <div id="managePassesList" style="display:flex; flex-direction:column; gap: 10px; margin-top: 14px;"></div>

            <div class="exp-section" style="margin-top: 14px;">
              <div style="font-weight: 900; margin-bottom: 8px;">Create pass type</div>
              <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div class="exp-field"><label>Name</label><input id="newName" placeholder="VIP / General" /></div>
                <div class="exp-field"><label>Mode</label>
                  <select id="newMode">
                    <option value="free">Free</option>
                    <option value="venue">Pay at venue</option>
                    <option value="contact">Contact organizer</option>
                    <option value="dm">DM organizer</option>
                    <option value="online">Online (future)</option>
                  </select>
                </div>
                <div class="exp-field"><label>Price (INR)</label><input id="newPrice" type="number" min="0" step="0.01" placeholder="0" /></div>
                <div class="exp-field"><label>Capacity (optional)</label><input id="newQty" type="number" min="1" step="1" placeholder="" /></div>
              </div>
              <div class="exp-field"><label>Description</label><textarea id="newDesc" placeholder="What's included?"></textarea></div>
              <div class="exp-field"><label>Contact text (optional)</label><input id="newContact" placeholder="WhatsApp/Phone/Instructions" /></div>
              <button class="exp-btn primary" id="btnCreatePassType" type="button">Create</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Edit pass modal -->
      <div id="editPassModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 720px;">
          <div class="ig-modal-item" style="padding: 18px; text-align: left;">
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px;">
              <div style="font-weight: 900; font-size: 18px;">Edit pass type</div>
              <button id="closeEditPass" type="button" class="exp-icon-btn">âœ•</button>
            </div>
            <input id="editTypeId" type="hidden" />
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 12px;">
              <div class="exp-field"><label>Name</label><input id="editName" /></div>
              <div class="exp-field"><label>Mode</label>
                <select id="editMode">
                  <option value="free">Free</option>
                  <option value="venue">Pay at venue</option>
                  <option value="contact">Contact organizer</option>
                  <option value="dm">DM organizer</option>
                  <option value="online">Online (future)</option>
                </select>
              </div>
              <div class="exp-field"><label>Price (INR)</label><input id="editPrice" type="number" min="0" step="0.01" /></div>
              <div class="exp-field"><label>Capacity (optional)</label><input id="editQty" type="number" min="1" step="1" /></div>
            </div>
            <div class="exp-field"><label>Description</label><textarea id="editDesc"></textarea></div>
            <div class="exp-field"><label>Contact text</label><input id="editContact" /></div>
            <label style="display:flex; gap: 10px; align-items:center; margin-top: 10px; color: var(--ig-secondary-text);">
              <input id="editActive" type="checkbox" /> Active
            </label>
            <div style="display:flex; gap: 10px; margin-top: 12px;">
              <button class="exp-btn primary" id="saveEditPass" type="button">Save</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Create event modal -->
      <div id="createEventModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 760px;">
          <div class="ig-modal-item" style="padding: 18px; text-align: left;">
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px;">
              <div style="font-weight: 900; font-size: 18px;">Create event</div>
              <button id="closeCreateEvent" type="button" class="exp-icon-btn">âœ•</button>
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 12px;">
              <div class="exp-field"><label>Title</label><input id="ceTitle" placeholder="Event title" /></div>
              <div class="exp-field"><label>Date & time</label><input id="ceDate" type="datetime-local" /></div>
              <div class="exp-field"><label>City</label><input id="ceCity" placeholder="Hyderabad" /></div>
              <div class="exp-field"><label>Category</label><input id="ceCategory" placeholder="Concert / Party / Trip" /></div>
              <div class="exp-field" style="grid-column: 1 / -1;"><label>Venue / Location</label><input id="ceLocation" placeholder="Venue name, area" /></div>
              <div class="exp-field" style="grid-column: 1 / -1;"><label>Cover image URL (optional)</label><input id="ceCover" placeholder="https://..." /></div>
              <div class="exp-field"><label>Organizer name (optional)</label><input id="ceOrganizer" placeholder="Brand / Organizer" /></div>
              <div class="exp-field"><label>Important note (optional)</label><input id="ceNote" placeholder="Entry rules, ID required..." /></div>
            </div>
            <div class="exp-field"><label>Description</label><textarea id="ceDesc" placeholder="Describe the event..."></textarea></div>
            <label style="display:flex; gap: 10px; align-items:center; margin-top: 10px; color: var(--ig-secondary-text);">
              <input id="cePublic" type="checkbox" checked /> Public listing (discover)
            </label>

            <div style="display:flex; gap: 10px; margin-top: 12px;">
              <button class="exp-btn primary" id="createEventSubmit" type="button">Create</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Check-in modal -->
      <div id="checkinModal" class="ig-modal-overlay" style="display:none;">
        <div class="ig-modal" style="max-width: 520px;">
          <div class="ig-modal-item" style="padding: 18px; text-align: left;">
            <div style="display:flex; justify-content:space-between; align-items:center; gap: 12px;">
              <div style="font-weight: 900; font-size: 18px;">Check-in pass</div>
              <button id="closeCheckin" type="button" class="exp-icon-btn">âœ•</button>
            </div>
            <div class="exp-field"><label>Pass code</label><input id="checkinCode" placeholder="Paste/enter code" /></div>
            <button class="exp-btn primary" id="btnCheckinGo" type="button">Check-in</button>
            <div id="checkinResult" class="exp-hint" style="margin-top: 10px;"></div>
          </div>
        </div>
      </div>

      <!-- Bottom Navigation -->
      <nav class="ig-bottom-nav">
        <a href="/home" class="ig-bottom-nav-item">
          <svg aria-label="Home" viewBox="0 0 24 24" width="24">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            <polyline points="9 22 9 12 15 12 15 22" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="ig-bottom-nav-label">Home</span>
        </a>
        <a href="/communities" class="ig-bottom-nav-item">
          <svg aria-label="Communities" viewBox="0 0 24 24" width="24">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="ig-bottom-nav-label">Communities</span>
        </a>
        <a href="/events" class="ig-bottom-nav-item active">
          <svg aria-label="Events" viewBox="0 0 24 24" width="24">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" fill="none"/>
            <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
          </svg>
          <span class="ig-bottom-nav-label">Events</span>
        </a>
        <a href="#" class="ig-bottom-nav-item" onclick="(function(e){e.preventDefault(); var u=localStorage.getItem('user'); if(u){ try{u=JSON.parse(u); if(u.id) location.href='/profile/'+u.id; }catch{}}})(event)">
          <svg aria-label="Profile" viewBox="0 0 24 24" width="24">
            <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M5.5 21v-2a7.5 7.5 0 0 1 13 0v2" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
          </svg>
          <span class="ig-bottom-nav-label">Profile</span>
        </a>
      </nav>

      <script src="/socket.io/socket.io.js"></script>
      <script src="/js/app.js"></script>
      <script src="/js/instagram-theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
      <script src="/js/events-experiences.js"></script>
    </body>
    </html>
